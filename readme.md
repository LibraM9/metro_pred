## 地铁乘客流量预测
* 初赛 30/2319 
* 复赛 49/2319
### 1 赛题要求

参赛者可通过分析地铁站的历史刷卡数据，预测站点未来的客流量变化，帮助实现更合理的出行路线选择，规避交通堵塞，提前部署站点安保措施等，最终实现用大数据和人工智能等技术助力未来城市安全出行。
* https://tianchi.aliyun.com/competition/entrance/231708/introduction

### 2 赛题解释
大赛开放了20190101至20190125共25天地铁刷卡数据记录，共涉及3条线路81个地铁站约7000万条数据作为训练数据（Metro_train.zip），供选手搭建地铁站点乘客流量预测模型，预测2019.1.29（初赛）2019.1.27（淘汰赛）各地铁站、每十分钟进站出站流量

### 3 eda
* 日期为X，流量为Y，画出每个地铁站每10分钟出入情况
* 画出节假日/非节假日情况
* 粒度变为小时，画出每小时出入情况

### 4 模型1：fbprophet
剔除周末特征，每10分钟的数据构造一个模型，每个模型预测一个值

### 5 模型2：lightgbm
#### 特征工程
* 近五天同一时间入站/出站人数
* 近三天均值
* 近1~2天，2~3天差值、比值
* 近3天/5天，每天值占比
* 近3天/5天 和/均值/最大值/最小值/中位数
* 以周为单位，所有星期n数据的最大值、最小值、均值、方差
* 外部数据：是否在运营时间内、几号线
#### 模型训练
* 1~25号数据训练，28号验证，获得最佳迭代次数
* 使用同样的参数及最佳迭代次数，1~28号数据训练，预测29号

### 6 规则
* 求取前一周周1~周5的分钟均值
* 求取前一周周1~周5的小时均值
* 分钟/小时得到分钟占小时的比例
* 28日的小时均值\*比例=29号预测值
* 淘汰赛使用 <周六值\*周六日比例\*分钟小时比例=周日值>

模型和规则相互融合得到最终结果